(this["webpackJsonpmy-bills"]=this["webpackJsonpmy-bills"]||[]).push([[0],{64:function(e,n,t){},65:function(e,n,t){},93:function(e,n,t){},94:function(e,n,t){},95:function(e,n,t){},96:function(e,n,t){},98:function(e,n,t){"use strict";t.r(n);var a=t(1),c=t.n(a),r=t(17),i=t.n(r),o=(t(64),t(12)),s=(t(65),t(50)),u=t.n(s),l=t(10),d=t(14),j=t.n(d),b=t(21),h=t(51),p=t(22),f=t.n(p),O="https://young-escarpment-43192.herokuapp.com/",v=function e(){Object(h.a)(this,e)};v.getBills=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(O+"bills");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),v.getHistory=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(O+"bill-history");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),v.approvePay=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(O+"approve-pay",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v.addPay=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(O+"add-pay",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var x=function(){var e=Object(l.useQuery)("bill-history",v.getHistory);return{data:e.data,isLoading:e.isLoading,isSuccess:e.isSuccess}},g=t(30),m=t(18),y=function(){var e=Object(l.useQueryClient)(),n=Object(l.useMutation)(v.approvePay,{onSuccess:function(n,a,c){var r;e.refetchQueries(),r="la transaccion fue ".concat(t(i)," con exito!"),Object(m.b)(r,{autoClose:5e3}),console.log("do something")}}).mutate,t=function(e){return"Aprobar"===e?"aprobada":"rechazada"},c=Object(a.useState)("Aprobar"),r=Object(o.a)(c,2),i=r[0],s=r[1];return{handleChange:function(e){s(e.target.value)},handleSubmit:function(e,t){n({id:e,value:t,status:i})},selectValue:i,ApprovePayToast:m.a}},w=t(3),S=function(e){var n=e.data,t="pending"!==n.title,a=n.body,c=n.title,r=n._id,i=n.append,o="".concat(c," - ").concat(a),s=y(),u=s.handleChange,l=s.handleSubmit;return Object(w.jsxs)("li",{children:[Object(w.jsx)("span",{children:o}),!t&&Object(w.jsxs)("div",{children:[Object(w.jsxs)("select",{name:"action-select",onChange:u,children:[Object(w.jsx)("option",{value:"Aprobar",children:"Aprobar"}),Object(w.jsx)("option",{value:"Rechazar",children:"Rechazar"})]}),Object(w.jsxs)("button",{onClick:function(){return l(r,i.value)},children:[Object(w.jsx)(g.a,{size:23})," "]})]})]})},C=function(){var e=Object(l.useQueryClient)(),n=Object(l.useQuery)("bills",v.getBills),t=n.data,c=n.isSuccess,r=n.isLoading,i=Object(a.useState)(0),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(a.useState)(""),b=Object(o.a)(j,2),h=b[0],p=b[1],f=Object(a.useState)(!1),O=Object(o.a)(f,2),x=O[0],g=O[1],y=Object(a.useState)(!1),w=Object(o.a)(y,2),S=w[0],C=w[1],k=Object(l.useMutation)(v.addPay,{onSuccess:function(n,t,a){var c;e.refetchQueries(),c="el abono por ".concat(t.value," ha sido enviado!"),Object(m.b)(c,{autoClose:5e3})}}).mutate,A=Object(a.useState)("pay"),P=Object(o.a)(A,2),N=P[0],L=P[1];Object(a.useEffect)((function(){c&&d(t[0].value)}),[t]);var F=function(){p(0),C(!1),g(!1)};return{bill:u,inputValue:h,showInput:x,readOnly:S?{readOnly:!0}:{readOnly:!1},handleShowForm:function(e){"payAll"===e?(C(!0),p(u),L(e)):(C(!1),p(""),L(e)),g(!x)},handleInput:function(e){p(e.target.value)},handleSubmit:function(e){if(h&&h<=0)return alert("el valor no puede ser 0");var n={id:t[0]._id,value:h,concept:e};k(n),F()},handleCancel:F,isSuccess:c,isLoading:r,data:t,concept:N,BillFormToast:m.a}},k=(t(93),function(e){var n=e.value,t=e.money,a=new Intl.NumberFormat("es-CO").format(n);return Object(w.jsxs)("div",{className:"value-bill",children:[Object(w.jsx)("label",{children:"Deuda a la fecha:"}),Object(w.jsxs)("p",{children:[a,Object(w.jsxs)("span",{children:[" ",t]})]})]})}),A=(t(94),t(47),t(52)),P=(t(95),function(){return Object(w.jsx)("div",{className:"load-spinner",children:Object(w.jsx)(A.a,{size:34})})}),N=function(){var e=x(),n=e.data,t=e.isLoading,a=e.isSuccess,c=C(),r=c.data,i=c.isSuccess,o=y().ApprovePayToast;return Object(w.jsxs)("div",{className:"creditor-container",children:[Object(w.jsx)("h1",{children:"creditor screen"}),Object(w.jsx)("h2",{children:i&&r[0].owner}),i&&Object(w.jsx)(k,{value:r[0].value,money:r[0].money}),Object(w.jsxs)("ul",{children:[t&&Object(w.jsx)(P,{}),a&&n.map((function(e){var n=e._id;return Object(w.jsx)(S,{data:e},n)}))]}),Object(w.jsx)(o,{})]})},L=t(53),F=(t(96),function(){var e=C(),n=e.handleShowForm,t=e.showInput,a=e.inputValue,c=e.readOnly,r=e.handleInput,i=e.handleCancel,o=e.handleSubmit,s=e.isSuccess,u=e.isLoading,l=e.data,d=e.BillFormToast,j=e.concept,b=x(),h=b.data,p=b.isLoading,f=b.isSuccess;return Object(w.jsxs)("div",{children:[Object(w.jsxs)("header",{children:[Object(w.jsx)("h1",{children:"Mis deudas app"}),Object(w.jsx)("div",{className:"profile",children:Object(w.jsx)(g.b,{size:48})})]}),Object(w.jsxs)("main",{children:[u&&Object(w.jsx)(P,{}),s&&Object(w.jsxs)("div",{children:[Object(w.jsx)(k,{value:l[0].value,money:l[0].money}),Object(w.jsxs)("div",{className:"actions",children:[Object(w.jsx)("button",{onClick:function(){return n("pay")},children:"Pagar Abono"}),Object(w.jsx)("button",{onClick:function(){return n("credit")},children:"Realizar Credito"}),Object(w.jsx)("button",{onClick:function(){return n("payAll")},children:"Pagar Todo"})]}),t&&Object(w.jsxs)("div",{className:"input-form",children:[Object(w.jsx)("input",Object(L.a)({onChange:function(e){return r(e)},value:a,type:"number"},c)),Object(w.jsx)("button",{onClick:i,children:"Cancelar"}),Object(w.jsx)("button",{onClick:function(){return o(j)},children:j})]})]}),Object(w.jsx)("div",{className:"history-graph",children:Object(w.jsx)("span",{children:"...cargando grafico"})}),Object(w.jsxs)("div",{className:"history-values",children:[p&&Object(w.jsx)(P,{}),f&&Object(w.jsx)("ul",{children:h.map((function(e){var n=e._id,t=e.body,a=e.title,c="".concat(a," ").concat(t);return Object(w.jsx)("li",{children:c},n)}))})]})]}),Object(w.jsx)(d,{})]})});t(97);var T=function(){var e=Object(a.useState)(!0),n=Object(o.a)(e,2),t=n[0],c=n[1];return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)("label",{children:Object(w.jsx)(u.a,{defaultChecked:t,onChange:function(){c(!t)}})}),t?Object(w.jsx)(N,{}):Object(w.jsx)(F,{})]})},Q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var z=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,101)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,r=n.getLCP,i=n.getTTFB;t(e),a(e),c(e),r(e),i(e)}))},B=new l.QueryClient;i.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(l.QueryClientProvider,{client:B,children:Object(w.jsx)(T,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/my-bills-app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/my-bills-app","/service-worker.js");Q?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):W(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):W(n,e)}))}}(),z()}},[[98,1,2]]]);
//# sourceMappingURL=main.7d6fe1f6.chunk.js.map